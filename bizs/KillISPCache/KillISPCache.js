(function(b){Bizs.KillISPCache=a;function a(c){if(a._instance){return a._instance}this._model=new a.Model(c);this._init()}a.prototype={_beforeInit:function(){JC.log("KillISPCache._beforeInit",new Date().getTime());this._model.processAjax()},process:function(d,e){d&&(d=b(d));if(!(d&&d.length)){return}var c=this;c._model.ignoreSameLinkText(e);c._model.selector(d);c._model.processLink();c._model.processForm();return this}};a.getInstance=function(){!a._instance&&(a._instance=new a());return a._instance};a.ignoreSameLinkText=true;a.randName="";JC.BaseMVC.buildModel(a);a.Model.prototype={init:function(){this._postfix=printf("{0}_{1}_",new Date().getTime().toString(),Math.round(Math.random()*100000));this._count=1;this._ignoreSameLinkText=true;this._randName="isp"},processLink:function(){var c=this;this.selector().find("a[href]").each(function(){var d=b(this),e=(d.attr("href")||"").trim(),f=d.html().trim();if(/javascript\:/.test(e)||/^[\s]*\#/.test(e)){return}if(c.ignoreSameLinkText()&&e.trim()==d.html().trim()){return}e=addUrlParams(e,c.keyVal());d.attr("href",e);d.html(f)})},processForm:function(){var c=this;this.selector().find("form").each(function(){var d=b(this),e=(d.prop("method")||"").toLowerCase();if(e=="post"){return}if(!d.find("input[name="+c.randName()+"]").length){b('<input type="hidden" name="'+c.randName()+'" value="'+c.postfix()+'" >').appendTo(d)}})},processAjax:function(){var c=this;b(document).ajaxSend(function(d,e,f){f.type!="POST"&&(f.url=addUrlParams(f.url,c.keyVal()))})},ignoreSameLinkText:function(c){typeof c!="undefined"&&(a.ignoreSameLinkText=c);return a.ignoreSameLinkText},postfix:function(){return this._postfix+(this._count++)},randName:function(){return a.randName||this._randName},keyVal:function(){var c={};c[this.randName()]=this.postfix();return c}};JC.BaseMVC.build(a,"Bizs");b(document).ready(function(){setTimeout(function(){a.autoInit&&a.getInstance().process(b(document))},100)})}(jQuery));