(function(b){window.Fixed=JC.Fixed=a;function a(e){if(a.getInstance(e)){return a.getInstance(e)}a.getInstance(e,this);this._model=new d(e);this._view=new c(this._model);this._init()}a.prototype={_init:function(){b([this._view,this._model]).on("BindEvent",function(e,g,f){_p.on(g,f)});b([this._view,this._model]).on("TriggerEvent",function(e,g){var f=sliceArgs(arguments);f.shift();f.shift();_p.trigger(g,f)});this._model.init();this._view.init();JC.log("Fixed init:",new Date().getTime());return this},show:function(){this._view.show();return this},hide:function(){this._view.hide();return this},layout:function(){return this._model.layout()},on:function(f,e){b(this).on(f,e);return this},trigger:function(f,e){b(this).trigger(f,e);return this}};a.getInstance=function(e,f){if(typeof e=="string"&&!/</.test(e)){e=b(e)}if(!(e&&e.length)||(typeof e=="string")){return}typeof f!="undefined"&&e.data("FixedIns",f);return e.data("FixedIns")};a.autoInit=true;a.durationms=300;a.stepms=3;a.interval=function(e){a._interval&&clearInterval(a._interval);e&&(a._interval=e)};function d(e){this._layout=e}d.prototype={init:function(){return this},isFixedTop:function(){return this._layout.is("[fixedtop]")},isFixedRight:function(){return this._layout.is("[fixedright]")},isFixedBottom:function(){return this._layout.is("[fixedbottom]")},isFixedLeft:function(){return this._layout.is("[fixedleft]")},fixedtop:function(){return parseInt(this._layout.attr("fixedtop"),10)},fixedright:function(){return parseInt(this._layout.attr("fixedright"),10)},fixedbottom:function(){return parseInt(this._layout.attr("fixedbottom"),10)},fixedleft:function(){return parseInt(this._layout.attr("fixedleft"),10)},fixeddurationms:function(e){var f;this.layout().is("[fixeddurationms]")&&(f=parseInt(this.layout().attr("fixeddurationms")));e.is("[fixeddurationms]")&&(f=parseInt(e.attr("fixeddurationms")));typeof f=="undefined"&&(f=a.durationms);isNaN(f)&&(f=a.durationms);return f},fixedstepms:function(e){var f;this.layout().is("[fixedstepms]")&&(f=parseInt(this.layout().attr("fixedstepms")));e.is("[fixedstepms]")&&(f=parseInt(e.attr("fixedstepms")));typeof f=="undefined"&&(f=a.stepms);isNaN(f)&&(f=a.stepms);return f},fixedmoveto:function(e){var f="";e&&(e=b(e))&&e.length&&(f=e.attr("fixedmoveto")||"");return f.trim()},moveToItem:function(){var f=this.layout().is("[fixedmoveto]")?this.layout():null,e;if(!f){(e=this._layout.find("[fixedmoveto]")).length&&(f=e)}return f},layout:function(){return this._layout},fixedmoveeffect:function(){var f=true,e=this.moveToItem();e&&e.length&&e.is("[fixedmoveeffect]")&&(f=parseBool(e.attr("fixedmoveeffect")));return f}};function c(e){this._model=e}c.prototype={init:function(){b.support.isFixed?this._initFixedSupport():this._initFixedUnsupport();this._initMoveTo();this._model.layout().show();return this},_initMoveTo:function(){var f=this,g=f._model.moveToItem();if(!(g&&g.length)){return}g.on("click",function(j){var i=b(this),h=f._model.fixedmoveto(i).toLowerCase();f._processMoveto(h,i)});b(window).on("resize",function(){a.interval()});mousewheelEvent(function e(h){a.interval()})},_processMoveto:function(n,j){if(!n){return}var g=this,l=parseInt(n,10),h=b(document).height(),q=h-b(window).height(),k=b(document).scrollTop(),o=k,e=0,p,f,i,m;if(isNaN(l)){switch(n){case"top":l=0;break;case"bottom":l=q;break;default:m=b(n);if(m.length){l=m.offset().top}break}}(isNaN(l)||l<0)&&(l=0);l>q&&(l=q);if(k==l){return}p=l<k?true:false;f=k>l?k:l;i=k>l?l:k;a.interval(easyEffect(function(s,r){p&&(s=f-s);b(document).scrollTop(s)},f,i,g._model.fixeddurationms(j),g._model.fixedstepms(j)))},_initFixedSupport:function(){var e=this;e._model.isFixedTop()&&e._model.layout().css("top",e._model.fixedtop()+"px");e._model.isFixedRight()&&e._model.layout().css("right",e._model.fixedright()+"px");e._model.isFixedBottom()&&e._model.layout().css("bottom",e._model.fixedbottom()+"px");e._model.isFixedLeft()&&e._model.layout().css("left",e._model.fixedleft()+"px");e._model.layout().css("position","fixed")},_initFixedUnsupport:function(){},hide:function(){},show:function(){}};b(document).ready(function(){if(!a.autoInit){return}b(["div.js_autoFixed","dl.js_autoFixed","ul.js_autoFixed","ol.js_autoFixed","button.js_autoFixed"].join()).each(function(){new a(b(this))})})}(jQuery));