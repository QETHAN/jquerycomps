(function(a){window.JCForm=JC.Form={disableButton:function(c,b){if(!c){return}c=a(c);b=b||1000;c.attr("disabled",true);setTimeout(function(){c.attr("disabled",false)},b)}};JC.AutoSelect&&(JC.Form.initAutoSelect=JC.AutoSelect)}(jQuery));(function(b){a.initCheckAll=function(f){f=b(f);var g=f.find("input[type=checkbox][checktype][checkfor]"),e;g.each(function(){e=b(this);if(!a.isAutoChecked(e)){return}if(a.getInstance(e)){return}new a(e)})};JC.Form.initCheckAll=a.initCheckAll;function a(e){if(a.getInstance(e)){return a.getInstance(e)}a.getInstance(e,this);JC.log("AutoChecked init",new Date().getTime());this._model=new d(e);this._view=new c(this._model);this._init()}a.prototype={_init:function(){var e=this;e._initHandlerEvent();b([e._view,e._model]).on("BindEvent",function(f,h,g){e.on(h,g)});b([e._view,e._model]).on("TriggerEvent",function(f,h){var g=sliceArgs(arguments);g.shift();g.shift();e.trigger(h,g)});e._model.init();e._view.init();e._view.itemChange();return e},_initHandlerEvent:function(){var e=this;e.selector().on("change",function(){e.trigger(e._model.checktype())});e.on("all",function(){JC.log("AutoChecked all",new Date().getTime());e._view.allChange()});e.on("inverse",function(){JC.log("AutoChecked inverse",new Date().getTime());e._view.inverseChange()});if(!(e._model.checktype()=="inverse"&&e._model.hasCheckAll())){b(e._model.delegateElement()).delegate(e._model.delegateSelector(),"click",function(f){if(a.isAutoChecked(b(this))){return}JC.log("AutoChecked change",new Date().getTime());e._view.itemChange()})}},selector:function(){return this._model.selector()},on:function(f,e){b(this).on(f,e);return this},trigger:function(f,e){b(this).trigger(f,e);return this}};a.getInstance=function(e,f){if(typeof e=="string"&&!/</.test(e)){e=b(e)}if(!(e&&e.length)||(typeof e=="string")){return}typeof f!="undefined"&&e.data("AutoCheckedIns",f);return e.data("AutoCheckedIns")};a.isAutoChecked=function(e){var f;e&&(e=b(e)).length&&(f=e.is("[checkfor]")&&e.is("[checktype]"));return f};function d(e){this._selector=e}d.isParentSelectorRe=/^[\/\|<]/;d.parentSelectorRe=/[^\/\|<]/g;d.childSelectorRe=/[\/\|<]/g;d.prototype={init:function(){return this},checktype:function(){return(this.selector().attr("checktype")||"").toLowerCase()},checkfor:function(){return(this.selector().attr("checkfor")||"")},checkall:function(){return(this.selector().attr("checkall")||"")},hasCheckAll:function(){return this.selector().is("[checkall]")&&this.selector().attr("checkall")},selector:function(){return this._selector},isParentSelector:function(){return d.isParentSelectorRe.test(this.selector().attr("checkfor"))},delegateSelector:function(){var f=this.selector().attr("checkfor"),e;if(this.isParentSelector()){if(/^</.test(this.checkfor())){this.checkfor().replace(/[\s]([\s\S]+)/,function(h,g){f=g})}else{f=this.checkfor().replace(d.childSelectorRe,"")}}return f},delegateElement:function(){var e=this,g=b(document),f;if(this.isParentSelector()){if(/^</.test(this.checkfor())){this.checkfor().replace(/^([^\s]+)/,function(i,h){g=parentSelector(e.selector(),h)})}else{f=this.checkfor().replace(d.parentSelectorRe,"");g=parentSelector(e.selector(),f)}}return g},items:function(){return this.delegateElement().find(this.delegateSelector())},checkedAll:function(){return this.selector().prop("checked")},checkedInverse:function(){return this.selector().prop("checked")},allSelector:function(){var e;if(this.checktype()=="inverse"){this.checkall()&&(e=parentSelector(this.selector(),this.checkall()))}else{e=this.selector()}return e}};function c(e){this._model=e}c.prototype={init:function(){return this},itemChange:function(){switch(this._model.checktype()){case"all":this._fixAll();break}},allChange:function(){var e=this,f=e._model.checkedAll();e._model.items().each(function(){if(a.isAutoChecked(b(this))){return}if(b(this).is("[disabled]")){return}b(this).prop("checked",f)})},inverseChange:function(){var e=this;e._model.items().each(function(){var f=b(this);if(a.isAutoChecked(f)){return}if(b(this).is("[disabled]")){return}f.prop("checked",!f.prop("checked"))});this._fixAll()},_fixAll:function(){var e=this,f=true;if(e._model.allSelector().prop("disabled")){return}e._model.items().each(function(){if(a.isAutoChecked(b(this))){return}if(b(this).is("[disabled]")){return}if(!b(this).prop("checked")){return f=false}});JC.log("_fixAll:",f);e._model.allSelector().prop("checked",f)}};b(document).ready(function(e){JC.Form.initCheckAll(b(document))})}(jQuery));(function(b){JC.Form.initAutoFill=function(d,e){if(!(d&&d.length)){d=b(document)}e=e||location.href;JC.log("JC.Form.initAutoFill");d.find("form.js_autoFillUrlForm").each(function(){var f=b(this);f.find("input[type=text][name],input[type=password][name],textarea[name]").each(function(){var g=b(this);if(has_url_param(e,g.attr("name"))){g.val(c(get_url_param(e,g.attr("name")).replace(/[\+]/g," ")))}});f.find("select[name]").each(function(){var g=b(this),h=c(get_url_param(e,g.attr("name")).replace(/[\+]/g," "));if(has_url_param(e,g.attr("name"))){if(a(g,h)){g.val(get_url_param(e,g.attr("name")))}else{g.attr("selectvalue",h)}}})})};b(document).ready(function(d){JC.Form.initAutoFill()});JC.Form.initAutoFill.decodeFunc;function c(e){try{e=(JC.Form.initAutoFill.decodeFunc||decodeURIComponent)(e)}catch(d){}return e}function a(d,f){var e=false,f=f.toString();d.find("option").each(function(){var g=b(this);if(g.val()==f){e=true;return false}});return e}}(jQuery));(function(a){JC.Form.initNumericStepper=function(c){c&&(c=a(c));c.delegate(".js_NStepperPlus, .js_NStepperMinus","click",function(h){var d=a(this),g=b.target(d);if(!(g&&g.length)){return}var f=parseInt(b.fixed(g),10)||0;var k=a.trim(g.val()),i=b.step(g);k=(f?parseFloat(k):parseInt(k,10))||0;var j=b.minvalue(g),e=b.maxvalue(g);d.hasClass("js_NStepperPlus")&&(k+=i);d.hasClass("js_NStepperMinus")&&(k-=i);k<j&&(k=j);k>e&&(k=e);JC.log(j,e,k,f,i);g.val(k.toFixed(f));b.callback(g)&&b.callback(g).call(g,d)})};JC.Form.initNumericStepper.onchange;var b={target:function(d){var c;if(d.attr("nstarget")){if(/^\~/.test(d.attr("nstarget"))){c=d.parent().find(d.attr("nstarget").replace(/^\~[\s]*/g,""));!(c&&c.length)&&(c=a(d.attr("nstarget")))}else{c=a(d.attr("nstarget"))}}return c},fixed:function(c){return c.attr("nsfixed")},step:function(c){return parseFloat(c.attr("nsstep"))||1},minvalue:function(c){return parseFloat(c.attr("nsminvalue")||c.attr("minvalue"))||0},maxvalue:function(c){return parseFloat(c.attr("nsmaxvalue")||c.attr("maxvalue"))||100},callback:function(c){var e=JC.Form.initNumericStepper.onchange,d;c.attr("nschangecallback")&&(d=window[c.attr("nschangecallback")])&&(e=d);return e}};a(document).ready(function(c){JC.Form.initNumericStepper(a(document))})}(jQuery));